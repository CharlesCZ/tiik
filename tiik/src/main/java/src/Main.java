package src;

import java.io.FileReader;
import java.io.IOException;


/**
 * Part of the task was to round up to 2 decimal places
 */
public class Main {

private static final SignService signService=new SignService();

    public static void main(String[] args) throws IOException {
        //initiate
        String projectPath = System.getProperty("user.dir");

        // pass the path to the file as a parameter
        FileReader fr =
                new FileReader(projectPath + "\\src\\main\\resources\\test.txt");

        int quantity = signService.countChars(fr);
        System.out.println("Char quantity" + quantity + "   bits=" + quantity * 8);
        System.out.println(signService.getCharsMap());
        signService.setCharStatistics(quantity);
        //quantity of input chracters
        signService.setEntropy();
        System.out.println(signService.getEntropy());


        Huffman huffman = new Huffman();
        huffman.setHuffmanQueue(10);

        //  huffman.getQueue().add(new src.Node('X',1));
        //     huffman.getQueue().add(new src.Node('T',1));
        //    huffman.getQueue().add(new src.Node('C',1));
        //    huffman.getQueue().add(new src.Node('G',2));
//huffman.getQueue().add(new src.Node('A',5));
        huffman.insertSignsToQueue(signService.getSigns());

        Node root = huffman.getHuffmanTree();
        //  huffman.traversePreOrder(root);
        huffman.preorder(root, "");
        huffman.getCodes().forEach(System.out::println);
        System.out.println(huffman.preorderPath(root));
        fr =
                new FileReader(projectPath + "\\src\\main\\resources\\test.txt");
        System.out.println(huffman.encode(signService.getFileContent(fr)));

        fr =
                new FileReader(projectPath + "\\src\\main\\resources\\test.txt");
        System.out.println(signService.getBitsQuantity(huffman.preorderPath(root), huffman.encode(signService.getFileContent(fr))));


        //   huffman.getHuffmanTree("01[A]01[G]01[T]01[C]1[X]");
        //   System.out.println(huffman.decode("0001[C]1[T]1[G]1[A]","1000101110011011011"));



        System.out.println(huffman.decode("0000001[.]001[J]01[I]01[ź]01[Z]01[W]001[L]01[K]01[:]01[Ż]01[ć]1[!]01[U]01[ń]01[C]001[S]1[T]001[B]01[O]01[é]01[?]1[M]01[P]1[R]1[ó]1[b]1[n]01[z]1[e]00001[ę]1[p]1[w]01[m]1[k]01[o]01[d]1[r]00001[u]1[ł]1[a]001[s]1[c]1[i]01[ ]0001[t]1[j]01[,]01[ż]1[g]01[y]001[h]1[l]01[ą]1[ś]",
                "000001011111001011111000010010110000001011111011111110000001011111111110101110011010100101111000100001011011001010011011100110010000010111110111111100000010111111111011111011011100100111010011100000111111111110111001100101011110001001110011110110010011011001100000011000000101011111010011110101011011010000110111000011110010001100001100111000001111101000101101100110111011101111011001110000110111010100100101110110000001100000010111111111011111011111010101101101101010101101100100010110011101101010011100001101000100110101011010100101110010111010011000111010111101110110111111001110100110001000000110000001010110001011111011111110010111000111010100101101000011101011010100001101111101010011110010101000011000101100000101100101110000110011110010100001010110110100110100001011110110010010010011110110010111101010011111101010010111001011100101110111110101101000001001100111101100001001111100111001011011000001101100111110001111000000011000000101110010101011001101111001011110100011001110111001001111101110110110000110110011110010101001110111001100001110000111101101101010010010101011001000101111001011110111001010100110010011001000001011111011110110101111001000101111001011110110000010110010111000011001111001010000101011011010011010000101111011001001001001111011001011110101001000001111011001001111101100010000110010000010111110111101101010100101000101100100110110011010111001110000110110011110101011111100101011011100110001111010110000010110110111000100101011110111011110010111010010000010111110111100000010111110110110000001011111111000000111110110110001010001001111101110110111010110111011000111100110000111001111011001110100101011000001101001110001000001101100110111110011100001100111010100100101010111100101011001011011000000101111111010101100001101111111011110000011011101100000110110011101001011100101110000110110101100000110100111010100101100110111000101011100110001110101001000110000101011111100100110001110001001010011111000011101101111001001101000010111101100110101010010111101110101101010010001011001001100111000011011001111000100101001111100001110110100111011100110010101101101100001100101000101111001011110010110111100100110000110011100101010000101011111100100100000011000000101111111111100111110011110111000111111101000100001111101101000011000011001101001100100111110111000100000010100100000011000000101111110110111000001111100111001011011001010000110011010110110011110010101011001110100001001011100100011011001111001011011000001101100000101111111111011010101001100000101111111111011101100000010111110101110000000011111011011000001111101101110001000011011111110100110110011101011010111110111010110011100110110011100110010101000011101011010111100100010111100101111011010100111000011011111010011000000110000001011111111101011011001010000001101001101111111101010111010100010001011011100101111001010011000111000101111000100011010101110101101110111011100010101100111100001101100111100010100101111001010000101011011111010110000011111001010110100001010111111001111000001101110001110111011101101010001000101100111010010111110100010111011001111100111101011001001100111101100001001111100111001000101100100110110001000101101111111101011011110100000111010011000111010100101101000011001100111011001000101100100110111010110111001000000110000001011111000011101010010110010100001101100111110011100100110110011111110101011101100111110101100101000011011001111100111001001101100111111101010111011001111101011001010000110110011111001110111000011111000001110000111110101011111100110101111001100000110110011111011110001101000010111101100111000101011001101110001010110001101100111010111000101001010010111100000111010110111000111001000101111001000110111011001101010100101111011001001010110110100010110110101001111110110100101111101011111100101111100000110101111100010000011111111000000011000000101111111101111100011000000101111101111011000000101111111110001000001110001010111001110000110111110111011101111011000011011001111010101001011110111000100100010110110010011100001100110000010111001101011111100110010100001101100111110011100101101111001011110010111111101101101001111101101011110101001110001001000101000011111011011110010110110100010011010100000001100000010111101101110001001010111011010101100001101111101110111011110110000110110011110100001010000101000101101100000110011010100100001011011111111010110111110101100000010111110111000111101110001111001010110101001110001001011110010111101101010010110100001101011111010110001011000000101111111111110110011101000010001111000011001001101000101110110101011000000101111111111010000011000010101111110001100100110111010100101100000010111111111110101101101110000111101100100110100010111011111010110000001011111111110100000101101111101001101001101000101110111110101100000010111111111111011011101101111010101010111011111010110000001001001000101100100110111010100101110101100000010111111111101111101101111001000111110010011010011010010101111101110101100000010111111111100011110110101011111100011010101010111011110101111001100101110110011010101101010111111001010110110100110110011110111111110101101110010001111101101110001111001010110101001011010000110011100110110101001111110011100000011010011101110111011111001000110111010100100001111101010111111000000001100000010111111111001000110000101000010000110110011110000001011110011000000101100001111101100100010110010011011100101110100110001111010110111011000111100000111110100011111011001000101100111011010100111000011010001001101010110101001011100101110100110001110101111000101101010110011000111110010101100111001100101010000110111110110011010010010101010111101011110010111001111011001110001111101110110110010010110011100010100111011111010011111011110111110010110000110000000000"));
    }
}